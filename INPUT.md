# Модель городского транспорта с использованием каршэринга

В данной работе мы рассмотрим модель городского транспорта, в которой помимо общественного и личного транспорта существует каршэринг.

## Общественный транспорт

Затраты на общественный транспорт мы можем описать функцией:

$$B_p = b_1 + pb_2$$

## Личный транспорт

Затраты на личный транспорт мы можем описать функцией:

$$A_p(x) = a + pT(x)$$

где $T(x)$ - время, проведённое в дороге, $p$ - цена одной минуты, $x$ - доля людей, которая воспользовалась автомобилями, $а$ - цена постоянных расходов (на парковку, бензин и т.д.)

## Каршэринг

Затраты на каршэринг мы будем описывать функцией:

$$C_p(x, x_1) = pT(x) + uT(x) + pS(x_1)$$

где $u$ - стоимость одной минуты каршэринга, $x_1$ - доля людей, которая воспользовалась каршэрингом, $S(x_1)$ - количество времени, которое потрачено на поиск свободной машины, $x$ - доля всех людей, которые воспользовались автомобилями

# Модель равновесия

Для начала определим, какой вид имеет функция $S(x_1)$. Эта функция должна монотонно возрастать с ростом $x_1$ (чем больше людей взяли машину на прокат, тем сложнее найти свободную, т.к. их локально ограниченное количество). Для начала возьмём простой случай, когда $S(x_1) = \alpha x_1$.

Основное предположение, которое будет использоваться в нашей модели, будет основано на том, что в самом начале человек делает выбор между общественным транспортом и автомобилем, а потом, если он выбрал автомобиль, то он делает выбор между каршерингом или личным транспортом т.е. мы тут имеем дело с двуступенчатым выбором.

Основываясь на этом предположении, мы будем считать, что цена в $k+1$ день $p_{k+1}$ будет устанавливаться исходя из равенства затрат на общественный транспорт и СРЕДНИХ затрат на автомобиль (т.е. сначала человек прикидывает насколько ему выгодно ехать на машине в среднем):


$$b_1 + b_2 p_{k+1} = (1 - \lambda) \Big(a + p_{k+1} T(x_k)\Big) + \lambda \Big(p_{k+1}T(x_k) + uT(x_k) + p_{k+1}\alpha x_1^k\Big)$$


$0 \leq \lambda \leq 1$ -- коэффициент усреднения, $x_k$ - доля людей, которая воспользовалась автомобилями в $k$-ый день, $x_1^k$ - доля людей, которая воспользовалась каршэринглм в $k$-ый день (т.е. личным транспортом воспользовалось $x_k - x_1^k$)


Выражаем $p_{k+1}$:

$$p_{k+1} = \frac{a - b_1 + \lambda \Big(uT(x_k) - a\Big)}{b_2 - T(x_k) - \lambda \alpha x_1^k}$$


Долю людей в $k+1$-ый день, которая воспользовалась автомобилями будет определятся из равенства:

$$x_{k+1} = \min \Big(p_{k+1}^{-\eta}, 1 \Big)$$

А доля людей, которая выбрала каршэринг будет определяться из условия равновесия при выборе автомобиля

$$p_{k+1}T(x_{k+1}) + uT(x_{k+1}) + p_{k+1}\alpha x_1^{k+1} = a + p_{k+1}T(x_{k+1})$$

$$x_1^{k+1} = \frac{1}{\alpha p_{k+1}} \Big(a - uT(x_{k+1})\Big)$$